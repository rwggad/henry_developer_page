---
layout: post
title: HTTP 구조
category: network
---

### 개요

WEB 개발 또는 NETWORK 개발시 필수적으로 알아야할 HTTP 구조에 대해서 정리 한다.

### 1. HTTP 프로토콜 이란?

HTTP (HyperText Transfer Protocol)의 약자로써, 인터넷 상에서 클라이언트와 서버간
데이터를 주고 받기 위해 정의된 프로토콜이다.

---

### 2. HTTP 프로토콜 특징

HTTP Protocol은 아래와 같은 특징을 가진다.

```
- Layer7 (Application) Level 의 프로토콜
- TCP/IP 기반으로 동작
- Connectionless(비 연결성)
- Stateless(무 상태성)
```

위 특징으로 클라이언트와 서버가 Connection이 맺어진 후, 요청에 대한 응답이 정상적으로 이루어졌을 때
Connection을 끊어 버린다.

이러한 동작 방식은 수 많은 유저가 서비스를 사용하더라도, Connection이 유지가 되지 않기 때문에
더 많이 요청을 처리할 수 있으며, 세션같은 정보를 별도로 저장하지 않을 수 있어 성능상 이점이 생긴다.

하지만 서버는 클라이언트의 이전 상태를 알 수 없다는 단점이 존재 한다. 이렇게 되면 웹 서비스를 수행하는데
문제가 생긴다는 점이 있지만, Cookie 또는 KeepAlive 옵션을 사용하여 해결이 가능하다.

---

### 3. HTTP Request

HTTP 요청 패킷에 대한 구조는 아래와 같이 정의되어 있다.

- 그림 1
<img border="1" src="{{ site.baseurl }}/public/images/post/HTTP_request.png">

#### [Request-Line]

Method 토큰, URI, Protocol 으로 구성되어 있으며, 아래와 같다.

- 그림 2
  <img border="1" src="{{ site.baseurl }}/public/images/post/HTTP_request_line.png">

  - <b>Method</b> : 요청 메서드 토큰은 Request-URI 에 의해 해당 자원이 어떤 방식으로 사용될지에 대해 정의 하며,
  대표적으로 아래와 같은 종류가 있다.

    | 토큰 종류 | 설명 |
    | :--: | :--: |
    | 'GET' | 정보를 요청 (SELECT)|
    | 'POST' | 정보를 삽입 (INSERT)|
    | 'PUT' | 정보를 업데이트 (UPDATE)|
    | 'DELETE' | 정보를 삭제 (DELETE) |

  - <b>Request-URI</b> : 처리할 자원(리소스) 에 대한 식별자 이다. (자세한 설명은 [rfc2616 section 3.2 참고](https://tools.ietf.org/html/rfc2616#section-3.2))
  <br/>
  - <b>HTTP-Version</b> : 사용하는 프로트콜 버전 (eg. HTTP/1.1)

#### [Header]

HTTP 프로토콜의 기능을 제공하기 위해 담고 있는 최소한의 정보며,
공통적으로 사용하는 헤더와 컨텐츠(Message)와 관련 없는 추가적인 정보를 서버로 전달하고자 할 때 사용 한다.

- 그림 3
  <img border="1" src="{{ site.baseurl }}/public/images/post/HTTP_header_field.png">

  - <b>OWS</b> : optional whitespace
  - <b>SP</b> : Space
  - <b>HTAB</b> : Horizontal tab
  - <b>VCHAR</b> : ASCII standard set (Any visible character)
  - <b>obs-text(obsolete-text)</b> : ASCII extended set(%x80-FF)
  - <b>token</b> : 1개 이상의 알파벳 또는 숫자(0-9) 또는 특수 문자( !,#,$,%,&,',*,+,-,.,^,_,\`,\|,\~ )

##### a. Request-Header

- Request 내용을 좀 더 구체화 시켜주는 정보가 포함되어 있다.

##### b. General-Header

- Request, Response Header에서 모두 사용가능 하며, 일반목적(기본적인) 항목들이 포함되어 있다.

##### c. Entity-header

- Request, Response Header에서 모두 사용가능 하며, 컨텐츠 내용의 설명에 대한 항목들이 포함되어 있다.


#### [Message-Body]

- 작성 중

---

### 4. HTTP Response

- 작성 중

---

#### 참고
- HTTP 관련
  - https://tools.ietf.org/html/rfc7230
  - https://tools.ietf.org/html/rfc2616
- ABNF
  - https://tools.ietf.org/html/rfc5234
- ASCII
  - http://lwp.interglacial.com/appf_01.htm
  - http://www.asciitable.com/
