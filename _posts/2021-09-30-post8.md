---
layout: post
title: python2.x 와 python3.x 차이
category: python
---

### 시작하며

- - -

2 -> 3 으로 버전의 숫자가 변경되었다는 건, 엄청난 변화가 있었다는 것을 의미한다.

Python2 버전은 [Python org](https://www.python.org/downloads/) 에서 확인할 수 있듯이, 2020년 1월 1일 이후로는 더이상 유지보수가 진행되지 않는다고 한다.

- 지원이 중단됨에도 불구하고 현재도 많은 곳에서 Python2를 사용하고 있지만, 점진적으로 Python3 버전으로 전환되며 Python2 버전 사용 비율은 줄어들고 있다고 한다.

지금까지 Python 2 버전을 사용하던 나도 이제는 Python3에 대해알아가야 하지 않을까 라는 생각이 들어 간단하게라도 Python 2 - Python 3 버전의 차이점을 포스팅 하려고 한다.

&nbsp;
&nbsp;

### 추가된 문법

- - -

#### 1. The \_\_future\_\_ module

- 간략하게 설명하자면, Python 2 버전에서 Python 3 버전의 몇몇 기능을 사용할 수 있도록 해준다. <br/> (future, 즉 미래 버전의 기능을 사용하게 해준다.)

<div style="padding-left:4em">

<pre><code class="language-python">>>>from __future__ import division
>>>print 1/3
0.3333
</code></pre>

</div>

- \_\_future\_\_ 모듈을 사용하여 python3 의 division 를 import 하면, 자동으로 int/float 으로 간주되어 '0.333 ..' 같은 결과를 얻을 수 있다. (아래 [Integer division](#integer-division) 참고)

    - 참고: 기존 Python2 버전은 기본적으로 int/int 형태로 수행하기 때문에 '0' 이 출력된다. (소수점 이하 버림)

        - 때문에 '0.333 ...' 와 같은 결과를 얻기 위해서는 소수점 '.' 을 붙여줘야 가능

<div style="padding-left:8em">

<pre><code class="language-python">>>>print 1./3
0.3333</code></pre>

</div>

&nbsp;
&nbsp;

### 기존 문법과의 차이

- - -

#### 1. The print function

- python3 버전에서는 항상 괄호를 사용해야하며 사용하지 않는 경우 SyntaxError 가 발생한다.

<div style="padding-left:4em">

<pre><code class="language-python">>>> print 'hello world'  # <- 3.x 버전에서는 사용 불가
>>> print('hello world')</code></pre>

</div>

&nbsp;

#### 2. Integer division

- python2 버전에서는 int/int 결과 값이 float 타입이라도, int 타입으로 출력된다. (때문에 int/int를 수행할 때, float 형태임을 추가적으로 선언해줘야했음)

- python3 버전에서는 int/int 의 결과 값이 float 타입이면 그대로 출력하게 된다.

<div style="padding-left:4em">

<pre><code class="language-python">>>> 1/2      # <- 2.x 버전에서는 int/int = int
0
>>> 1/2      # <- 3.x 버전에서는 int/int = float 으로 자동 처리
0.5
</code></pre>

이때, python3 로 짜져진 코드를 python2 에서 실행 시킬 때는 위와 같은 차이 때문에 주의가 필요하다.

</div>

&nbsp;

#### 3. Unicode

- python2 버전에서는 문자열의 데이터 타입이 bytes 였지만, python3 에서는 문자열의 데이터 타입이 unicode 타입이다.
    - Bytes 타입: 8bit 로써 ASCII 문자를 나타낸다. (영어 위주 사용가능)
    - Unicode 타입: 전세계 나라의 언어와 기호를 나타낼 수 있도록 만들어진 데이터 타입

- python2 버전에서의 문자열은 bytes 타입이였기 때문에 다른 나라의 언어와 기호를 사용할 때 큰제약사항이 있었고, 지금까지는 이를 해결하기 위해 모듈 상단에 특정 헤더를 추가해서 사용했었다. <br>
하지만 python3 의 문자열은 Unicode 타입으로 변경되었기 때문에 따로 헤더 추가 없이 다양한 언어사용이 가능해졌다.

<div style="padding-left:4em">

<pre><code class="language-python"># -*- coding: utf-8 -*-</code></pre>

</div>

- 하지만 일부 Built-In, 3rd Party 함수들은 Bytes 데이터 타입기반으로 입/출력을 하고있기 때문에, 상황에 따라 이런 함수들에 대한 고려도 필요하다.

&nbsp;

#### 4. xrange

- 먼저 python2 버전에서 사용되던 xrange, range 함수에 대한 차이점 부터 알아야한다.
    - range 함수는 반환 값이 list 타입이며, 정해진 범위내의 값이 모두 메모리에 적재된다. (즉, 범위만큼 list 크기도 증가)
    - xrange 함수는 반환 값이 xrange 타입이며, 범위내의 값을 모두 메모리에 적재하지 않고, 해당값을 접근할 때 마다 로드 하는 방식이다. (generator의 yield 와 유사)
        - 참고: 이러한 구조적 차이로 list 타입에서 사용가능한 slice 같은 다양항 함수를 사용할 수 없다.

<div style="padding-left:8em">

<pre><code class="language-python">>>> xrange(5)[:1]
Traceback (most recent call last):
File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: sequence index must be integer, not 'slice'</code></pre>

</div>

- python3 버전에서는 xrange 함수가 삭제되었고, rangee 하나로 변경되었다. (python3 에서는 xrange 사용불가)
    - 참고: python3 에서 range에 대한 타입을 확인 해보면, python2 와는 달리 list 타입이 아닌,  range class로 출력되는 것을 볼 수 있다.

<div style="padding-left:6em">

<pre><code class="language-python">>>>type(range(5))
&lt;class 'range'&gt;</code></pre>

해당 클래스 타입은 slice와 같은 함수도 사용가능한 것을 확인할 수 있는데, 이 부분에 대해서는 좀 더 분석이 필요할 듯 하다

</div>

- 추가적으로 python3 range 에는 '__contain__' 라는 함수가 추가된것을 볼 수 있다.
    - <해당 부분은 추가적인 분석이 필요>

&nbsp;

#### 5. Rasing exceptions

- python3 버전에서는 예외 처리에 대한 문법 정의시, 괄호를 사용해야하며 사용하지 않는 경우 Invalid Syntax 가 발생한다.

<div style="padding-left:4em">

잘못된 사용 방법

<pre><code class="language-python">>>> raise IOError, "file error"
File "&lt;ipython-input-10-25f049caebb0&gt;", line 1
raise IOError, "file error"
             ^
SyntaxError: invalid syntax</code></pre>

올바른 사용 방법

<pre><code class="language-python">>>> raise IOError("file error")</code></pre>

</div>

- 참고로 python2 버전에서는 위 방식 모두 지원 하고 있다.

&nbsp;

#### 6. Handling exceptions

- python3 버전에서는 발생한 예외에 대해 처리시, 'as' 키워드를 사용해야한다.

<div style="padding-left:4em">

잘못된 사용 방법

<pre><code class="language-python">try:
    let_us_cause_a_NameError
except NameError as err:   # <- 'as' 사용
    print(err, '--> our error message')</code></pre>

</div>

&nbsp;

#### 7. For-loop variables and the global namespace leak

- python3 버전에서는 더이상 for-loop 구문에서 사용된 변수가 전역 네임스페이스에 소속되지 않는다.
- 아래 예시를 통해 이해 하자.

<div style="padding-left:4em">

python2 버전에서의 for-loop 변수 네임스페이스

<pre><code class="language-python">>>>i = 1
>>>print 'before: i =', i
1
>>>print 'comprehension: ', [i for i in range(5)]
>>>print 'after: i =', i
4  # <- for-loop 에서 선언된 변수 i의 값 </code></pre>

python3 버전에서의 for-loop 변수 네임스페이스

<pre><code class="language-python">>>>i = 1
>>>print 'before: i =', i
1
>>>print 'comprehension: ', [i for i in range(5)]
>>>print 'after: i =', i
1  # <- for-loop의 변수i 와는 관련 없는것을 확인할 수 있음 </code></pre>

</div>

&nbsp;

#### 8. Comparing unoderable types

- python3 버전에서는 더이상 unoderable 한 타입 (eg. list) 와의 값 비교를 할 수 없으며, 만약 비교 시도시 TypeError 예외처리가 발생하게 된다.

<div style="padding-left:4em">

python2 버전에서 unoderable 한 값 비교시

<pre><code class="language-python">>>>print "[1, 2] > 'foo' = ", [1, 2] > 'foo'
[1, 2] > 'foo' =  False</code></pre>

python3 버전에서 unoderable 한 값 비교시

<pre><code class="language-python">>>>print "[1, 2] > 'foo' = ", [1, 2] > 'foo'
TypeError                                 Traceback (most recent call last)

&lt;ipython-input-16-a9031729f4a0&gt; in &lt;module&gt;()
----> 1 print("[1, 2] > 'foo' = ", [1, 2] > 'foo')

TypeError: unorderable types: list() > str()</code></pre>

</div>

&nbsp;

#### 9. Parsing user inputs via input()

- 먼저 python2 버전에서 사용되던 input, raw_input 함수에 대한 차이점 부터 알아야한다.
    - 두 함수 모두 사용자의 입력값을 가져오는 함수이다.
    - 다만, input() 함수를 통하면 자동으로 입력값에 맞는 타입으로 저장되고, raw_input()을 사용하면 모든 값을 string 타입으로 변경하여받아온다.

<div style="padding-left:6em">

python2 버전에서 input / raw_input 비교

<pre><code class="language-python">>>>res = input('enter: ')
enter: 1
>>> type(res)
&lt;type 'int'&gt;

>>>raw_res = input('enter: ')
enter: 1
>>> type(res)
&lt;type 'str'&gt;
</code></pre>

</div>

- python3 버전에서는 input() 함수를 통한 입력값은 모두 string 형태로 처리되도록 수정되었다.

&nbsp;

#### 10. Retuning iterable objects instead of lists

- [xrange](#xrange) 섹션에서 확인했듯이 특정 함수에 대한 리턴값이 'list'에서 반복가능한 object가 반환되도록 수정되었다.
    1. zip()
    2. map()
    3. filter()
    4. dictionary’s .keys() method
    5. dictionary’s .values() method
    6. dictionary’s .items() method


&nbsp;
&nbsp;


### 참고

- - -

- https://sebastianraschka.com/Articles/2014_python_2_3_key_diff.html
