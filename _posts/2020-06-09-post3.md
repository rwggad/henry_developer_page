---
layout: post
title: NGINX 란?
category: server
---

> NGINX란?

* 동시 접속 처리에 특화된 웹 서버 프로그램이다.
* Apache 웹 서버 보다 동작이 단순하고, 전달자로써의 역할만 하기 때문에 동시접속 처리에 특화가 되어 있다.
    1. 정적 파일을 처리하는 HTTP 서버
    2. Reverse Proxy로서의 역활 -> 요청을 배분하는 역할을 해준다.(비동기식 처리 방식)

> NGINX 설치 및 실행

1. 작업 환경
    * 패키지 매니저를 통해 간단히 설치 할 수있지만, 옵션등을 제어하기 위해서는 소스 코드를 직접 컴파일 하는 것이 좋다.
    * nginx를 설치하기 위해서는 아래와 같은 의존성 라이브러리가 필요하다.
        1. pcre
            * 재작성 모듈(rewrite)과 HTTP 코어 모듈이 PCRE 구문에 따른 정규표현식을 사용하기 떄문
        2. zlib
            * 모듈에서 gzip 압축을 사용하기 위함
        3. OpenSSL
            * 범용 암호화 라이브러리

2. 빌드 및 설치
    * nginx를 설치 하기 위해서 공식 홈페이지에서 소스 파일을 다운 할 수 있다.
        * [NGINX 공식 홈페이지](http://nginx.org/download/)
    * 설치 순서
        1. ./configure : 설정
            * 설정을 할 때는 몇가지의 옵션을 부여할 수 있다.
                * ./configure --help 로 확인 가능하다.
                    * [--prefix] 엔진엑스가 설치되는 기본 디렉토리 (기본값: `/usr/local/nginx`) 나머지 설정은 이 경로의 상대경로로 연결된다.
                    * [--conf-path] 주 환경 설정 파일의 경로 (기본값: `<prefix>/conf/nginx.conf`)
                    * [--error-log-path] 에러 로그 파일 (기본값: `<prefix>/logs/error.log`)
                    * [--http-log-path] 접근 로그의 위치
                    * [--pid-path] 엔진엑스 pid 파일 경로 (기본값: `<prefix>/logs/nginx.pid`)
                    * [--with-(zlib or pcre or openssl)] NGINX가 의존하고 있는 라이브러리들의 소스 경로
                    * [--add-module] 외부 모듈인 echo 모듈의 소스가 위치하는 디렉토리

        2. make : 빌드
            * 코드 파일 디렉토리 내에 /obj 폴더에 빌드한 파일들이 생성된다.
        3. make install : 설치
            * configure 에서 경로를 따로 설정하지 않았다면 기본적으로 /usr/local/nginx 폴더에 install 된다.

3. NGINX 실행
    * NGINX 프로세스 구조
        1. master process (한 개)
            * nginx의 configuration file을 읽고 worker process를 설정하고 관리한다.
            * configuration file 경로
                * 기본 경로 (따로 설정하지 않았을 때) : /usr/local/nginx/conf/~
        2. worker process (여러 개)
            * 실질적인 웹 서버의 역활을 수행 하는 프로세스
    * 위의 install 된 위치에 있는 nginx을 이용하여 데몬 시작, 중지를 할 수 있다.
        * 기본 경로 (따로 설정하지 않았을 때) : /usr/local/nginx/sbin/~
            * [./nginx -s stop] 바로 종료
            * [./nginx -s quit] 정상적으로 중단
            * [./nginx -s reopen] 로그 파일을 다시 오픈
            * [./nginx -s reload] 설정을 다시 로드


